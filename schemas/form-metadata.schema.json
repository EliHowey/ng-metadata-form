{
    "$schema": "http://json-schema.org/draft-07/schema",
    "$id": "https://elihowey.com/schemas/form-metadata.schema.json",
    "title": "Angular Form Metadata",
    "description": "Metadata required to render an Angular form dynamically.",
    "type": "object",
    "properties": {
        "id": {
            "description": "ID for the form.",
            "type": "string"
        },
        "controls": {
            "description": "Contents of the form. This can be a series of form questions or sections.",
            "type": "array",
            "items": {
                "$ref": "#/definitions/formContent"
            },
            "minItems": 1
        }
    },
    "required": ["controls"],
    "definitions": {
        "formContent": {
            "description": "Contents of a form, which can be either a form section or a form question.",
            "type": "object",
            "oneOf": [{ "$ref": "#/definitions/formQuestion" }, { "$ref": "#/definitions/formSection" }]
        },
        "formSection": {
            "description": "A section of a dynamic Angular form.",
            "type": "object",
            "properties": {
                "type": {
                    "const": "section"
                },
                "id": {
                    "description": "ID for the form section.",
                    "type": "string"
                },
                "title": {
                    "description": "Title of the form section.",
                    "type": "string"
                },
                "contents": {
                    "description": "Contents of the form section.",
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/formContent"
                    },
                    "minItems": 1
                }
            },
            "required": ["type", "id", "contents"]
        },
        "formQuestion": {
            "description": "A question within a dynamic Angular form.",
            "type": "object",
            "properties": {
                "type": {
                    "const": "question"
                },
                "id": {
                    "description": "ID for the form question.",
                    "type": "string"
                },
                "questionText": {
                    "description": "Display text of the form question.",
                    "type": "string"
                },
                "helpText": {
                    "description": "Help text for the form question.",
                    "type": "string"
                },
                "required": {
                    "description": "Whether the user is required to provide a response to the question.",
                    "type": "boolean"
                },
                "controls": {
                    "description": "Form controls for the question.",
                    "type": "array",
                    "items": {
                        "$ref": "./form-controls.schema.json"
                    },
                    "minItems": 1
                }
            },
            "required": ["type", "id", "questionText", "required", "controls"]
        }
    }
}
